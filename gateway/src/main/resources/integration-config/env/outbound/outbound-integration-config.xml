<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:int-xml="http://www.springframework.org/schema/integration/xml"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:int-sftp="http://www.springframework.org/schema/integration/sftp"
       xmlns:int-http="http://www.springframework.org/schema/integration/http"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util.xsd
		http://www.springframework.org/schema/integration
		http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/integration/xml
        http://www.springframework.org/schema/integration/xml/spring-integration-xml.xsd
		http://www.springframework.org/schema/integration/sftp
		http://www.springframework.org/schema/integration/sftp/spring-integration-sftp.xsd
        http://www.springframework.org/schema/integration/http
        http://www.springframework.org/schema/integration/http/spring-integration-http.xsd">


    <import resource="classpath:integration-config/env/outbound/ledger-outbound-integration-config.xml"></import>

    <import resource="classpath:integration-config/env/outbound/invoice-outbound-integration-config.xml"></import>

    <import resource="classpath:integration-config/env/outbound/promatch-outbound-integration-config.xml"></import>

    <int:channel id="outbound-jaxb-channel"/>

    <int:channel id="outbound-logger-channel"/>

    <int:channel id="blob-enricher-channel"/>

    <int:channel id="outbound-router-channel"/>

    <!--<int-xml:unmarshalling-transformer
            id="unmarshallingTransformer"
            unmarshaller="jaxbunmarshaller" input-channel="outbound-jaxb-channel" output-channel="outbound-logger-channel"
    />-->

    <int:transformer input-channel="outbound-jaxb-channel" output-channel="blob-enricher-channel" ref="outboundLoggingService" method="transform"/>

    <int:transformer input-channel="blob-enricher-channel" output-channel="outbound-router-channel" ref="blobEnricherTransformer" method="transform"/>

    <!--<int-sftp:outbound-channel-adapter id="sftpOutboundAdapter" session-factory="sftpSessionFactory"
                                       channel="sftp-outbound-channel" charset="UTF-8" remote-directory="/Producer"
                                       remote-file-separator="/"/>-->


    <bean id="jaxbunmarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="packagesToScan" value="no.sample.exchange.gateway.outbound.model" />
    </bean>

</beans>